<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JUST Online Judge</title>

    <% include ../../../templates/head.ejs %>

</head>
<body>

<!-- header and menu -->
<% include ../../../templates/header.ejs %>

<% include ../../../templates/contest_header.ejs %>
        <% var ch = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"; %>


                <div class="panel-body">

                    <h5>REQUEST CLARIFICATION</h5><br>

                    <form role="form" method="post"  action="/contest/<%= contest.id %>/clarifications/request" >

                        <div class = "form-group">
                            <select name="problem" class="form-control" >
                                <option value="general">GENERAL</option>
                                <% _.forEach(problems,function(value, key){ %>
                                    <option value="<%= value.pid %>"><%= ch.charAt(parseInt(key)-1) %>.<%= value.title %></option>
                                <% }); %>
                            </select>
                        </div>

                        <div class = "form-group">
                            <textarea name="request" class = "form-control" rows = "6"></textarea>
                        </div>

                        <div class = "form-group">
                            <input class = "btn btn-primary btn-sm" type="submit" value="SEND" />
                        </div>

                    </form>
                </div>



        </div>
    </div>
</div>

<script type="text/javascript">


    window.onload = function () {
        CountDownTimer('<%= contest.end %>');
    };

    function CountDownTimer(begin) {

        var end = new Date(begin);

        var _second = 1000;
        var _minute = _second * 60;
        var _hour = _minute * 60;
        var _day = _hour * 24;
        var timer;
        var running = false;
        var doc =  document.getElementById("countdown");

        function showRemaining() {
            var now = new Date();

            var distance = end - now;

            if (distance < 0) {

                clearInterval(timer);
                document.getElementById("cd-h").innerHTML = '';
                doc.innerHTML = 'Finished<br>' + "<p style='font-size:14px;'><%= moment(contest.end).from() %></p>";


                if( running ) {
                    alert('Contest Finished!');
                }
                return;
            }
            var days = Math.floor(distance / _day);
            var hours = Math.floor((distance % _day) / _hour);
            var minutes = Math.floor((distance % _hour) / _minute);
            var seconds = Math.floor((distance % _minute) / _second);


            doc.innerHTML = days <=0 ? '' : days + 'd ';
            doc.innerHTML += Math.floor(hours/10) + '' +  hours%10 + ':';
            doc.innerHTML += Math.floor(minutes/10) + '' +  minutes%10 + ':';
            doc.innerHTML += Math.floor(seconds/10) + '' +  seconds%10;


            running = true;
        }
        showRemaining();
        timer = setInterval(showRemaining, 1000);
    }

</script>

<!-- footer -->
<% include ../../../templates/footer.ejs %>

</body>
</html>